(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t){},130:function(e,t){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(9),r=n.n(c),i=(n(97),n(11)),l=n(188),o=n(182),s=n(187),j=n(178),d=n(148),u=n(12),b=n(83),O=n(52),m=n.n(O),x=n(4),f=Object(a.createContext)(),h=Object(b.io)("https://blabber-video-chat.herokuapp.com/"),p=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(u.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(""),o=Object(u.a)(l,2),s=o[0],j=o[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),O=b[0],p=b[1],v=Object(a.useState)(!1),g=Object(u.a)(v,2),C=g[0],y=g[1],w=Object(a.useState)(!1),k=Object(u.a)(w,2),I=k[0],S=k[1],A=Object(a.useState)(""),B=Object(u.a)(A,2),N=B[0],D=B[1],R=Object(a.useRef)(),V=Object(a.useRef)(),E=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){i(e),R.current.srcObject=e})),h.on("me",(function(e){return j(e)})),h.on("calluser",(function(e){var t=e.from,n=e.name,a=e.signal;p({isReceivedCall:!0,from:t,name:n,signal:a})}))}),[]);return Object(x.jsx)(f.Provider,{value:{call:O,callAccepted:C,myVideo:R,userVideo:V,stream:r,name:N,setName:D,callEnded:I,me:s,callUser:function(e){var t=new m.a({initiator:!0,trickle:!1,stream:r});t.on("signal",(function(t){h.emit("calluser",{userToCall:e,signalData:t,from:s,name:N})})),t.on("stream",(function(e){V.current.srcObject=e})),h.on("callaccepted",(function(e){y(!0),t.signal(e)})),E.current=t},leaveCall:function(){S(!0),E.current.destroy(),window.location.reload()},answerCall:function(){y(!0);var e=new m.a({initiator:!1,trickle:!1,stream:r});e.on("signal",(function(e){h.emit("answercall",{signal:e,to:O.from})})),e.on("stream",(function(e){V.current.srcObject=e})),e.signal(O.signal),E.current=e}},children:t})},v=function(){var e=Object(a.useContext)(f),t=e.name,n=e.callAccepted,c=e.myVideo,r=e.userVideo,i=e.callEnded,l=e.stream,s=e.call;return Object(x.jsxs)(j.a,{container:!0,children:[l&&Object(x.jsx)(d.a,{children:Object(x.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(x.jsx)("video",{playsInline:!0,ref:c,controls:!0,autoPlay:!0})]})}),n&&!i&&(console.log(r),Object(x.jsx)(d.a,{children:Object(x.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:s.name||"Name"}),Object(x.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0})]})}))]})},g=n(190),C=function(){var e=Object(a.useContext)(f),t=e.answerCall,n=e.call,c=e.callAccepted;return Object(x.jsx)(x.Fragment,{children:n.isReceivedCall&&!c&&Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(x.jsxs)("h1",{children:[n.name," is calling"]}),Object(x.jsx)(g.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},y=n(183),w=n(189),k=n(86),I=n(184),S=n(185),A=n(186),B=function(e){var t=e.children,n=Object(a.useContext)(f),c=n.me,r=n.callAccepted,i=n.name,l=n.setName,s=n.callEnded,b=n.leaveCall,O=n.callUser,m=Object(a.useState)(""),h=Object(u.a)(m,2),p=h[0],v=h[1];return Object(x.jsx)(y.a,{children:Object(x.jsxs)(d.a,{elevation:10,children:[Object(x.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(x.jsxs)(j.a,{container:!0,children:[Object(x.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(x.jsx)(w.a,{label:"Name",value:i,onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(x.jsx)(k.CopyToClipboard,{text:c,children:Object(x.jsx)(g.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(x.jsx)(I.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(x.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Make A Call "}),Object(x.jsx)(w.a,{label:"ID to Call",value:p,onChange:function(e){return v(e.target.value)},fullWidth:!0}),r&&!s?Object(x.jsx)(g.a,{variant:"contained",color:"secondary",startIcon:Object(x.jsx)(S.a,{fontSize:"large",onClick:b}),children:"Hang Up"}):Object(x.jsx)(g.a,{variant:"contained",color:"primary",startIcon:Object(x.jsx)(A.a,{fontSize:"large",onClick:function(){return O(p)}}),children:"Call"})]})]})}),t]})})},N=Object(s.a)((function(e){return{appBar:Object(i.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),D=function(){var e=N();return Object(x.jsxs)("div",{className:e.wrapper,children:[Object(x.jsx)(l.a,{className:e.appBar,position:"static",color:"inherit",children:Object(x.jsx)(o.a,{variant:"h2",align:"center",children:"Video Chat"})}),Object(x.jsx)(v,{}),Object(x.jsx)(B,{children:Object(x.jsx)(C,{})})]})};r.a.render(Object(x.jsx)(p,{children:Object(x.jsx)(D,{})}),document.getElementById("root"))},97:function(e,t,n){}},[[147,1,2]]]);
//# sourceMappingURL=main.29995ec9.chunk.js.map